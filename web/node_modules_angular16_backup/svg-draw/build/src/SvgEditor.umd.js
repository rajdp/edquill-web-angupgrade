!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SvgEditor=t():e.SvgEditor=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2),o=r(3);t.addElement=o.addElement,t.setElementParameters=o.setElementParameters,t.addElementParameters=o.addElementParameters,t.removeElement=o.removeElement;var u=r(4),f=r(5),p=r(6),s=r(7),d=r(8),a=r(9),l=r(10),c=r(11),h=r(12),w=r(13),m=r(14),y=r(15),b=r(16),E={rect:b.wrap(f.rectCreator,[w.idClassPropertiesWrapper,m.colorPropertiesWrapper]),ellipse:b.wrap(p.ellipseCreator,[w.idClassPropertiesWrapper,m.colorPropertiesWrapper]),circle:b.wrap(s.circleCreator,[w.idClassPropertiesWrapper,m.colorPropertiesWrapper]),line:b.wrap(d.lineCreator,[w.idClassPropertiesWrapper,m.colorPropertiesWrapper]),polygon:b.wrap(a.polygonCreator,[w.idClassPropertiesWrapper,m.colorPropertiesWrapper,y.pointsPropertyWrapper]),polyline:b.wrap(l.polylineCreator,[w.idClassPropertiesWrapper,m.colorPropertiesWrapper,y.pointsPropertyWrapper]),group:b.wrap(c.groupCreator,[w.idClassPropertiesWrapper]),text:b.wrap(h.textCreator,[w.idClassPropertiesWrapper,m.colorPropertiesWrapper])},v=u.combineSVGElementCreators(E);t.createSvgEditor=function(e,t){return n.initializeSvgEditor(i.initialState(u.stateToSvg(e,t,v)))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeSvgEditor=function(e){return function(t){return function(r){return t(e,r)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=function(e){var t={elements:[]},r=function(r){return e&&e(r),t=r};return function(e){return e(t,r)}}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],u=0,f=o.length;u<f;u++,i++)n[i]=o[u];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.addElement=function(e,t){return e((function(e,r){var n=e.elements.length-1,o=function(e){if(!e.type)throw new Error("Element type is not specified");return{id:++n,domId:e.domId,class:e.class,type:e.type,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0,fill:e.fill,stroke:e.stroke,points:e.points,children:e.children,text:e.text,fontSize:e.fontSize}},u=o(t);if("group"===u.type){if(!u.children)throw new Error("Group children is not specified");u.children=u.children.map((function(e){return o(e)}))}return r({elements:i(e.elements,[u])}),u}))},t.setElementParameters=function(e,t){return e((function(e,r){if(!t.id&&0!==t.id)throw new Error("Element id is not specified");var i=e.elements.find((function(e){return e.id===t.id}));if(!i)throw new Error("Element not found");var o=n(n({},i),t);return r({elements:e.elements.map((function(e){return e.id===o.id?o:e}))}),o}))},t.addElementParameters=function(e,t){return e((function(e,r){if(!t.id&&0!==t.id)throw new Error("Element id is not specified");var i=e.elements.find((function(e){return e.id===t.id}));if(!i)throw new Error("Element not found");var o=function(e,t){if(!e.id&&0!==e.id)throw new Error("Element id are not defined");if(!e.type)throw new Error("Element type are not defined");return n(n(n(n(n(n({},e),{id:e.id,type:e.type}),t.x&&e.x&&{x:e.x+t.x}),t.y&&e.y&&{y:e.y+t.y}),t.width&&e.width&&{width:e.width+t.width}),t.height&&e.height&&{height:e.height+t.height})},u=o(i,t);return u.children&&(u.children=u.children.map((function(e){return o(e,t)}))),r({elements:e.elements.map((function(e){return e.id===u.id?u:e}))}),u}))},t.removeElement=function(e,t){return e((function(e,r){if("number"!=typeof t.id)throw new Error("Element id are not defined");var i=e.elements.findIndex((function(e){return e.id===t.id}));if("number"!=typeof i)throw new Error("Element not found");var o=e.elements[i],u=e.elements.filter((function(e,t){return t!==i}));return r(n(n({},e),{elements:u})),o}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stateToSvg=function(e,t,r){var n,i=e.createElementNS("http://www.w3.org/2000/svg","g");return t.appendChild(i),function(t){var o=t.elements.filter((function(e){if(!n)return!0;var t=n.elements.find((function(t){return t.id===e.id}));return!t||!Object.keys(e).every((function(r){return e[r]===t[r]}))})),u=n&&n.elements.filter((function(e){return!t.elements.find((function(t){return t.id===e.id}))}));o.map((function(t){var n=r(e,t);return t.children&&t.children.forEach((function(t){if(!t.id&&0!==t.id)throw new Error("Child id are not defined");if(!t.type)throw new Error("Child type are not defined");return n.appendChild(r(e,t))})),n})).forEach((function(e){var t=Array.from(i.children).find((function(t){return e.dataset.id===t.getAttribute("data-id")}));t?i.replaceChild(e,t):i.appendChild(e)})),u&&u.forEach((function(e){var t=Array.from(i.children).find((function(t){return""+e.id===t.getAttribute("data-id")}));if(!t)throw new Error("Element to delete not found in DOM");i.removeChild(t)})),n=t}},t.combineSVGElementCreators=function(e){return function(t,r){if(!e[r.type])throw new Error("Unknown element type: "+r.type);return e[r.type](t,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectCreator=function(e,t){if("number"!=typeof t.x||"number"!=typeof t.y)throw new Error("Element x or y are not specified");if("number"!=typeof t.width||"number"!=typeof t.height)throw new Error("Element width or height are not specified");var r=e.createElementNS("http://www.w3.org/2000/svg","rect");return r.setAttribute("x",""+t.x),r.setAttribute("y",""+t.y),r.setAttribute("width",""+t.width),r.setAttribute("height",""+t.height),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ellipseCreator=function(e,t){if("number"!=typeof t.x||"number"!=typeof t.y)throw new Error("Element x or y are not specified");if("number"!=typeof t.width||"number"!=typeof t.height)throw new Error("Element width or height are not specified");var r=e.createElementNS("http://www.w3.org/2000/svg","ellipse");return r.setAttribute("cx",""+(t.x+t.width/2)),r.setAttribute("cy",""+(t.y+t.height/2)),r.setAttribute("rx",""+t.width/2),r.setAttribute("ry",""+t.height/2),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleCreator=function(e,t){if("number"!=typeof t.x||"number"!=typeof t.y)throw new Error("Element x or y are not specified");if("number"!=typeof t.width||"number"!=typeof t.height)throw new Error("Element width or height are not specified");var r=e.createElementNS("http://www.w3.org/2000/svg","circle");if(r.setAttribute("cx",""+(t.x+t.width/2)),r.setAttribute("cy",""+(t.y+t.height/2)),t.width!==t.height)throw new Error("Circle width and height are not the same");return r.setAttribute("r",""+t.width/2),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineCreator=function(e,t){if("number"!=typeof t.x||"number"!=typeof t.y)throw new Error("Element x or y are not specified");if("number"!=typeof t.width||"number"!=typeof t.height)throw new Error("Element width or height are not specified");var r=e.createElementNS("http://www.w3.org/2000/svg","line");return r.setAttribute("x1",""+t.x),r.setAttribute("y1",""+t.y),r.setAttribute("x2",""+(t.x+t.width)),r.setAttribute("y2",""+(t.y+t.height)),r.setAttribute("stroke","black"),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polygonCreator=function(e){return e.createElementNS("http://www.w3.org/2000/svg","polygon")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polylineCreator=function(e){return e.createElementNS("http://www.w3.org/2000/svg","polyline")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupCreator=function(e){return e.createElementNS("http://www.w3.org/2000/svg","g")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textCreator=function(e,t){var r=e.createElementNS("http://www.w3.org/2000/svg","text");if("number"!=typeof t.x||"number"!=typeof t.y)throw new Error("Element x or y are not specified");if("string"!=typeof t.text)throw new Error("Element text are not specified");if("number"!=typeof t.fontSize)throw new Error("Element font size are not specified");r.setAttribute("x",""+t.x),r.setAttribute("y",""+t.y);var n=e.createTextNode(t.text);return r.appendChild(n),r.setAttribute("font-size",""+t.fontSize),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.idClassPropertiesWrapper=function(e){return function(t){return e.domId&&t.setAttribute("id",""+e.domId),e.class&&t.setAttribute("class",""+e.class),t.setAttribute("data-id",""+e.id),t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorPropertiesWrapper=function(e){return function(t){return e.fill&&t.setAttribute("fill",""+e.fill),e.stroke&&t.setAttribute("stroke",""+e.stroke),t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pointsPropertyWrapper=function(e){return function(t){if(!e.points)throw new Error("Element points are not specified");if(!e.x||!e.y)throw new Error("Element x or y are not specified");if(!e.width||!e.height)throw new Error("Element width or height are not specified");var r,n,i,o=function(e,t){return e.filter((function(e,r){return!(r%2)===t}))},u=e.points.split(" ").join(",").split(",").map((function(e){return+e})),f=o(u,!0),p=o(u,!1),s=Math.min.apply(void 0,f),d=Math.max.apply(void 0,f)-s,a=Math.min.apply(void 0,p),l=Math.max.apply(void 0,p)-a,c=function(e,t,r){return e.map((function(e,n){return n%2==0?e*t:e*r}))}(u,e.width/d,e.height/l),h=Math.min.apply(void 0,o(c,!0)),w=Math.min.apply(void 0,o(c,!1)),m=(r=c,n=e.x-h,i=e.y-w,r.map((function(e,t){return t%2==0?e+n:e+i})));return t.setAttribute("points",""+m.join(",")),t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrap=function(e,t){return function(r,n){return t.reduce((function(e,t){return t(n)(e)}),e(r,n))}}}])}));