export var pointsPropertyWrapper = function (element) {
    return function (domElement) {
        if (!element.points) {
            throw new Error('Element points are not specified');
        }
        if (!element.x || !element.y) {
            throw new Error('Element x or y are not specified');
        }
        if (!element.width || !element.height) {
            throw new Error('Element width or height are not specified');
        }
        var pointsWithoutSpaces = element.points.split(' ').join(',');
        var getPointsValues = function (points, isXValues) {
            return points.filter(function (_, index) { return !(index % 2) === isXValues; });
        };
        var allPoints = pointsWithoutSpaces.split(',').map(function (point) { return +point; });
        var xPoints = getPointsValues(allPoints, true);
        var yPoints = getPointsValues(allPoints, false);
        var pointsX = Math.min.apply(undefined, xPoints);
        var pointsWidth = Math.max.apply(undefined, xPoints) - pointsX;
        var pointsY = Math.min.apply(undefined, yPoints);
        var pointsHeight = Math.max.apply(undefined, yPoints) - pointsY;
        var scaleX = element.width / pointsWidth;
        var scaleY = element.height / pointsHeight;
        var translatePoints = function (points, translateX, translateY) {
            return points.map(function (point, index) { return (index % 2 === 0) ? point + translateX : point + translateY; });
        };
        var scalePoints = function (points, scaleX, scaleY) {
            return points.map(function (point, index) { return (index % 2 === 0) ? point * scaleX : point * scaleY; });
        };
        var scaledPoints = scalePoints(allPoints, scaleX, scaleY);
        var newPointsX = Math.min.apply(undefined, getPointsValues(scaledPoints, true));
        var newPointsY = Math.min.apply(undefined, getPointsValues(scaledPoints, false));
        var translatedPoints = translatePoints(scaledPoints, element.x - newPointsX, element.y - newPointsY);
        domElement.setAttribute('points', "" + translatedPoints.join(','));
        return domElement;
    };
};
//# sourceMappingURL=PointsPropertyWrapper.js.map