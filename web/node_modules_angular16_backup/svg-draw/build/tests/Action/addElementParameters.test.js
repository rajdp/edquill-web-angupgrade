import { expect } from 'chai';
import { spy } from 'sinon';
import { addElementParameters } from '../../src/Action';
describe('addElementParameters', function () {
    var setState = spy();
    var stateChanger = function (action) {
        var state = {
            elements: [
                {
                    id: 0,
                    type: 'test',
                    x: 1,
                    y: 2
                },
                {
                    id: 1,
                    type: "test",
                    children: [
                        { id: 2, type: "test", x: 2, y: 2 },
                        { id: 3, type: "test", x: 3, y: 3 }
                    ]
                }
            ]
        };
        return action(state, setState);
    };
    beforeEach(function () {
        setState.resetHistory();
    });
    it('should throw element id exception', function () {
        expect(function () { return addElementParameters(stateChanger, {}); }).throw('Element id is not specified');
    });
    it('should throw element not found exception', function () {
        var parameters = {
            id: 5
        };
        expect(function () { return addElementParameters(stateChanger, parameters); }).throw('Element not found');
    });
    it('should return element', function () {
        var parameters = {
            id: 0,
            x: 5,
            y: 6
        };
        var result = addElementParameters(stateChanger, parameters);
        var expectedResult = { id: 0, type: 'test', x: 6, y: 8 };
        expect(result).deep.equal(expectedResult);
    });
    it('should should add element parameters', function () {
        var parameters = {
            id: 0,
            x: 5,
            y: 6
        };
        addElementParameters(stateChanger, parameters);
        var setStateChangerArgs = setState.getCalls().map(function (call) { return call.args; });
        var expectedSetStateChangerArgs = [[{
                    elements: [
                        { id: 0, type: "test", x: 6, y: 8 },
                        {
                            id: 1, type: "test", children: [
                                { id: 2, type: "test", x: 2, y: 2 },
                                { id: 3, type: "test", x: 3, y: 3 }
                            ]
                        }
                    ]
                }]];
        expect(expectedSetStateChangerArgs).deep.equal(setStateChangerArgs);
    });
    it('should should add group element parameters', function () {
        var parameters = {
            id: 1,
            x: 5,
            y: 6
        };
        addElementParameters(stateChanger, parameters);
        var setStateChangerArgs = setState.getCalls().map(function (call) { return call.args; });
        var expectedSetStateChangerArgs = [[{
                    elements: [
                        { id: 0, type: "test", x: 1, y: 2 },
                        {
                            id: 1, type: "test", children: [
                                { id: 2, type: "test", x: 7, y: 8 },
                                { id: 3, type: "test", x: 8, y: 9 }
                            ]
                        }
                    ]
                }]];
        expect(expectedSetStateChangerArgs).deep.equal(setStateChangerArgs);
    });
});
//# sourceMappingURL=addElementParameters.test.js.map