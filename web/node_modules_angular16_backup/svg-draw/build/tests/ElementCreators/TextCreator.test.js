import { expect } from 'chai';
import { spy } from 'sinon';
import { textCreator } from '../../src/SVG/TextCreator';
describe('TextCreator', function () {
    var setAttribute = spy();
    var sampleElementAppendChild = spy(function () { });
    var sampleElement = { setAttribute: setAttribute, appendChild: sampleElementAppendChild };
    var createElementNS = spy(function () { return sampleElement; });
    var sampleTextNode = { testNode: 'testNode' };
    var createTextNode = spy(function () { return sampleTextNode; });
    var document = { createElementNS: createElementNS, createTextNode: createTextNode };
    var element = {
        id: 0,
        type: 'text',
        x: 10,
        y: 20,
        text: 'sample text',
        fontSize: 15
    };
    beforeEach(function () {
        setAttribute.resetHistory();
        createElementNS.resetHistory();
        createTextNode.resetHistory();
        sampleElementAppendChild.resetHistory();
    });
    it('should return object', function () {
        var result = textCreator(document, element);
        expect(result).deep.equal(sampleElement);
    });
    it('should call createElementNS', function () {
        textCreator(document, element);
        var expectedCreateElementArgs = [['http://www.w3.org/2000/svg', 'text']];
        var createElementArgs = createElementNS.getCalls().map(function (call) { return call.args; });
        expect(expectedCreateElementArgs).deep.equal(createElementArgs);
    });
    it('should call setAttribute', function () {
        textCreator(document, element);
        var expectedSetAttributeArgs = [
            ['x', '10'],
            ['y', '20'],
            ['font-size', '15']
        ];
        var setAttributeArgs = setAttribute.getCalls().map(function (call) { return call.args; });
        expect(expectedSetAttributeArgs).deep.equal(setAttributeArgs);
    });
    it('should append text child', function () {
        textCreator(document, element);
        var createTextNodeArgs = createTextNode.getCalls().map(function (call) { return call.args; });
        var expectedCreateTextNodeArgs = [['sample text']];
        expect(createTextNodeArgs).deep.equal(expectedCreateTextNodeArgs);
        var sampleElementAppendChildArgs = sampleElementAppendChild.getCalls().map(function (call) { return call.args; });
        var expectedSampleElementAppendChildArgs = [[sampleTextNode]];
        expect(sampleElementAppendChildArgs).deep.equal(expectedSampleElementAppendChildArgs);
    });
    it('should throw coordinates exception', function () {
        var incorrectElement = {};
        expect(function () { return textCreator(document, incorrectElement); }).throw('Element x or y are not specified');
    });
    it('should throw text exception', function () {
        var incorrectElement = { x: 1, y: 1 };
        expect(function () { return textCreator(document, incorrectElement); }).throw('Element text are not specified');
    });
    it('should throw font size exception', function () {
        var incorrectElement = { x: 1, y: 1, text: 'text' };
        expect(function () { return textCreator(document, incorrectElement); }).throw('Element font size are not specified');
    });
});
//# sourceMappingURL=TextCreator.test.js.map