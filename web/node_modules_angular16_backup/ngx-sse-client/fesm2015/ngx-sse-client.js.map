{"version":3,"file":"ngx-sse-client.js","sources":["ng://ngx-sse-client/lib/events-polyfill.ts","ng://ngx-sse-client/lib/sse-options.interface.ts","ng://ngx-sse-client/lib/sse-request-options.interface.ts","ng://ngx-sse-client/lib/sse-client.service.ts","ng://ngx-sse-client/public-api.ts","ng://ngx-sse-client/ngx-sse-client.ts"],"sourcesContent":["(function () {\n  if (typeof window.Event === 'function') return;\n\n  abstract class Event {\n    prototype: Event;\n    readonly bubbles: boolean;\n    cancelBubble: boolean;\n    readonly cancelable: boolean;\n    readonly composed: boolean;\n    readonly currentTarget: EventTarget | null;\n    readonly defaultPrevented: boolean;\n    readonly eventPhase: number;\n    readonly isTrusted: boolean;\n    returnValue: boolean;\n    /** @deprecated */\n    readonly srcElement: EventTarget | null;\n    readonly target: EventTarget | null;\n    readonly timeStamp: number;\n    readonly type: string;\n    composedPath: () => EventTarget[] = () => [];\n    initEvent: (type: string, bubbles?: boolean, cancelable?: boolean) => void = () => undefined;\n    preventDefault: () => void = () => undefined;\n    stopImmediatePropagation: () => void = () => undefined;\n    stopPropagation: () => void = () => undefined;\n    readonly AT_TARGET: number;\n    readonly BUBBLING_PHASE: number;\n    readonly CAPTURING_PHASE: number;\n    readonly NONE: number;\n\n    constructor(type: string, eventInitDict: EventInit = { bubbles: false, cancelable: false, composed: false }) {\n      this.type = type;\n      this.bubbles = eventInitDict?.bubbles;\n      this.cancelable = eventInitDict?.cancelable;\n      this.composed = eventInitDict?.composed;\n    }\n  }\n\n  window.MessageEvent = class MessageEvent<T = any> extends Event {\n    readonly data: T;\n    readonly lastEventId: string;\n    readonly origin: string;\n    readonly ports: ReadonlyArray<MessagePort>;\n    readonly source: MessageEventSource | null;\n\n    constructor(type: string, eventInitDict?: MessageEventInit) {\n      super(type, eventInitDict);\n      this.data = eventInitDict?.data;\n      this.lastEventId = eventInitDict?.lastEventId;\n      this.origin = eventInitDict?.origin;\n      this.ports = eventInitDict?.ports;\n      this.source = eventInitDict?.source;\n    }\n  };\n\n  window.ErrorEvent = class ErrorEvent extends Event {\n    readonly colno: number;\n    readonly error: any;\n    readonly filename: string;\n    readonly lineno: number;\n    readonly message: string;\n\n    constructor(type: string, eventInitDict?: ErrorEventInit) {\n      super(type, eventInitDict);\n      this.colno = eventInitDict?.colno;\n      this.error = eventInitDict?.error;\n      this.filename = eventInitDict?.filename;\n      this.lineno = eventInitDict?.lineno;\n      this.message = eventInitDict?.message;\n    }\n  };\n})();\n","export interface SseOptions {\n  /**\n   * `true` to automatically reconnect when the request is closed by an request\n   * error (including timeout errors) or completed.\n   *\n   * In this case, to close the connection is necessary to unsubscribe manually.\n   *\n   * @default `true`\n   */\n  keepAlive?: boolean;\n\n  /**\n   * Delay before reconnecting with the server, this is only useful when\n   * `keepAlive` is `true`.\n   *\n   * @default `5000`\n   */\n  reconnectionDelay?: number;\n\n  /**\n   * Defines the response type.\n   *\n   * When set to `event` a `MessageEvent` will be returned with the data and a\n   * default `Event` with type error in case of erros.\n   *\n   * When set to `text` only the message data will be returned. In this case no\n   * errors will be returned, only the data from successful requests.\n   *\n   * @default `text`\n   */\n  responseType?: 'event' | 'text';\n}\n\nexport const defaultSseOptions: SseOptions = { keepAlive: true, reconnectionDelay: 3_000, responseType: 'event' };\n","import { HttpHeaders, HttpParams } from '@angular/common/http';\n\nexport interface SseRequestOptions {\n  body?: any;\n  headers?: HttpHeaders | { [header: string]: string | string[] };\n  params?: HttpParams | { [param: string]: string | string[] };\n  withCredentials?: boolean;\n}\n\nexport const defaultRequestOptions = { observe: 'events', reportProgress: true, responseType: 'text' };\n","import './events-polyfill';\n\nimport { HttpClient, HttpDownloadProgressEvent, HttpErrorResponse, HttpEvent, HttpEventType, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, Subscriber, Subscription } from 'rxjs';\nimport { delay, repeatWhen, retryWhen, takeWhile, tap } from 'rxjs/operators';\n\nimport { defaultSseOptions, SseOptions } from './sse-options.interface';\nimport { defaultRequestOptions, SseRequestOptions } from './sse-request-options.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SseClient {\n  private static readonly SEPARATOR = ':';\n\n  private progress = 0;\n  private chunk = '';\n\n  private sseOptions: SseOptions;\n  private httpClientOptions: any;\n\n  constructor(private httpClient: HttpClient) {}\n\n  /**\n   * Constructs a request which listen to the SSE and interprets the data as\n   * events and returns the full event stream.\n   *\n   * @param url the endpoint URL.\n   * @param options an object of `SseOption`\n   * @param requestOptions the HTTP options to send with the request.\n   * @param method the HTTP method\n   *\n   * @returns an observable of all events for the request, with the response body of type `Event`.\n   */\n  public stream(url: string, options?: { keepAlive?: boolean; reconnectionDelay?: number; responseType?: 'event' }, requestOptions?: SseRequestOptions, method?: string): Observable<Event>;\n\n  /**\n   * Constructs a request which listen to the SSE and interprets the data as a\n   * string text and returns the full event stream.\n   *\n   * @param url the endpoint URL.\n   * @param options an object of `SseOption`\n   * @param requestOptions the HTTP options to send with the request.\n   * @param method the HTTP method\n   *\n   * @returns an observable of all events for the request, with the response body of type string.\n   */\n  public stream(url: string, options?: { keepAlive?: boolean; reconnectionDelay?: number; responseType?: 'text' }, requestOptions?: SseRequestOptions, method?: string): Observable<string>;\n\n  public stream(url: string, options?: SseOptions, requestOptions?: SseRequestOptions, method = 'GET'): Observable<string | Event> {\n    this.sseOptions = Object.assign({}, defaultSseOptions, options);\n    this.httpClientOptions = Object.assign({}, requestOptions as any, defaultRequestOptions);\n\n    return new Observable<string | Event>((observer) => {\n      const subscription = this.subscribeStreamRequest(url, this.sseOptions, this.httpClientOptions, method, observer);\n      return () => subscription.unsubscribe();\n    });\n  }\n\n  private subscribeStreamRequest(url: string, options: SseOptions, requestOptions: any, method: string, observer: Subscriber<string | Event>): Subscription {\n    return this.httpClient\n      .request<string>(method, url, requestOptions)\n      .pipe(repeatWhen((completed) => this.repeatWhen(completed, options.keepAlive, options.reconnectionDelay)))\n      .pipe(retryWhen((error) => this.retryWhen(error, options.keepAlive, options.reconnectionDelay, observer)))\n      .subscribe((event) => this.parseStreamEvent(event, observer));\n  }\n\n  private repeatWhen(completed: Observable<any>, keepAlive: boolean, reconnectionDelay: number): Observable<any> {\n    return completed.pipe(takeWhile(() => keepAlive)).pipe(delay(reconnectionDelay));\n  }\n\n  private retryWhen(attempts: Observable<any>, keepAlive: boolean, reconnectionDelay: number, observer: Subscriber<string | Event>): Observable<any> {\n    return attempts\n      .pipe(tap((error) => this.threatRequestError(error, observer)))\n      .pipe(takeWhile(() => keepAlive))\n      .pipe(delay(reconnectionDelay));\n  }\n\n  private threatRequestError(event: HttpErrorResponse, observer: Subscriber<string | Event>): void {\n    this.dispatchStreamData(this.errorEvent(event), observer);\n\n    if (!this.isValidStatus(event.status)) {\n      observer.error(event);\n    }\n  }\n\n  private isValidStatus(status: number): boolean {\n    return status !== undefined && status !== null && status <= 299;\n  }\n\n  private parseStreamEvent(event: HttpEvent<string>, observer: Subscriber<string>): void {\n    if (event.type === HttpEventType.Sent) {\n      this.progress = 0;\n      return;\n    }\n\n    if (event.type === HttpEventType.DownloadProgress) {\n      this.onStreamProgress((event as HttpDownloadProgressEvent).partialText, observer);\n      return;\n    }\n\n    if (event.type === HttpEventType.Response) {\n      this.onStreamCompleted(event as HttpResponse<string>, observer);\n      return;\n    }\n  }\n\n  private onStreamProgress(data: string, observer: Subscriber<string>): void {\n    data = data.substring(this.progress);\n    this.progress += data.length;\n    data.split(/(\\r\\n|\\r|\\n){2}/g).forEach((part) => this.parseEventData(part, observer));\n  }\n\n  private onStreamCompleted(response: HttpResponse<string>, observer: Subscriber<string>): void {\n    this.onStreamProgress(response.body, observer);\n    this.dispatchStreamData(this.parseEventChunk(this.chunk), observer);\n\n    this.chunk = '';\n    this.progress = 0;\n\n    this.dispatchStreamData(this.errorEvent(), observer);\n  }\n\n  private parseEventData(part: string, observer: Subscriber<string>) {\n    if (part.trim().length === 0) {\n      this.dispatchStreamData(this.parseEventChunk(this.chunk), observer);\n      this.chunk = '';\n    } else {\n      this.chunk += part;\n    }\n  }\n\n  private parseEventChunk(chunk: string): MessageEvent {\n    if (!chunk || chunk.length === 0) return;\n\n    const chunkEvent: ChunkEvent = { id: null, data: '', event: 'message' };\n    chunk.split(/\\n|\\r\\n|\\r/).forEach((line) => this.parseChunkLine(line.trim(), chunkEvent));\n\n    return this.messageEvent(chunkEvent.event, { lastEventId: chunkEvent.id, data: chunkEvent.data });\n  }\n\n  private parseChunkLine(line: string, event: ChunkEvent): void {\n    const index = line.indexOf(SseClient.SEPARATOR);\n    if (index <= 0) return null;\n\n    const field = line.substring(0, index);\n    if (Object.keys(event).findIndex((key: string) => key === field) === -1) return;\n\n    let data = line.substring(index + 1);\n    if (field === 'data') data = event.data + data;\n\n    event[field] = data;\n  }\n\n  private dispatchStreamData(event: Event, observer: Subscriber<unknown>): void {\n    if (!this.validEvent(event)) return;\n\n    if (this.sseOptions.responseType === 'event') {\n      observer.next(event);\n    } else {\n      observer.next((event as MessageEvent).data);\n    }\n  }\n\n  private validEvent(event: Event): boolean {\n    if (!event) return false;\n    if (event.type === 'error' && this.sseOptions.responseType !== 'event') return false;\n    if (event.type !== 'error' && (!(event as MessageEvent).data || !(event as MessageEvent).data.length)) return false;\n    return true;\n  }\n\n  private messageEvent(type: string, options: MessageEventInit): MessageEvent {\n    return new MessageEvent(type, options);\n  }\n\n  private errorEvent(error?: any): Event {\n    let eventInitDict: ErrorEventInit;\n\n    if (error && error.status > 0) {\n      eventInitDict = { error, message: error.message };\n\n      if (!this.isValidStatus(error.status)) {\n        eventInitDict['status'] = error.status;\n        eventInitDict['statusText'] = error.statusText;\n      }\n    }\n\n    return new ErrorEvent('error', eventInitDict);\n  }\n}\n\ntype ChunkEvent = { id: string; data: string; event: 'message' };\n","/*\n * Public API Surface of ngx-sse-client\n */\nexport * from './lib/sse-client.service';\nexport * from './lib/sse-options.interface';\nexport * from './lib/sse-request-options.interface';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}