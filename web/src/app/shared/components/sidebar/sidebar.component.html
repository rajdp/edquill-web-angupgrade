<aside
  class="app-sidebar custom-scrollbar"
  [class.is-collapsed]="!sideBarOpened"
>
  <div class="sidebar-header">
    <button class="btn btn-icon btn-outline-primary sidebar-nav-toggle d-lg-none" type="button" (click)="navServices.collapseSidebar = !navServices.collapseSidebar">
      <i class="bi bi-x-lg"></i>
    </button>
    <div class="sidebar-user-card">
      <span class="sidebar-avatar">
        <img
          *ngIf="profile && !listCheck"
          [src]="imgUrl + '/' + profile"
          alt="Profile image"
        />
        <img
          *ngIf="profile && listCheck"
          [src]="profile"
          alt="Profile image"
        />
        <span *ngIf="!profile" class="sidebar-avatar__placeholder">
          <i class="bi bi-person-fill"></i>
        </span>
      </span>
      <div class="sidebar-user-info" *ngIf="sideBarOpened">
        <span class="sidebar-user-name">{{ name }}</span>
      </div>
    </div>
  </div>

  <nav class="sidebar-navigation" (click)="removeSessionData()">
    <ul class="nav flex-column">
      @for (menuItem of menuItems; track menuItem.title) {
        <li class="nav-item" [class.active]="menuItem.active">
          @if (menuItem.type === 'link') {
            <a
              class="nav-link"
              [routerLink]="[menuItem.path]"
              routerLinkActive="active"
              (click)="toggletNavActive(menuItem, 'link')"
              [ngbTooltip]="sideBarOpened ? null : menuItem.title"
              placement="right"
            >
              <span class="nav-icon">
                <app-feather-icons [icon]="menuItem.icon"></app-feather-icons>
              </span>
              <span class="nav-text" *ngIf="sideBarOpened">
                {{ menuItem.title }}
                @if (menuItem.badgeType) {
                  <span class="badge ms-2" [ngClass]="'badge-' + menuItem.badgeType">
                    {{ menuItem.badgeValue }}
                  </span>
                }
              </span>
            </a>
          } @else if (menuItem.type === 'sub') {
            <button
              class="nav-link nav-link--toggle"
              type="button"
              (click)="toggletNavActive(menuItem, 'sub')"
              [attr.aria-expanded]="menuItem.active"
            >
              <span class="nav-icon">
                <app-feather-icons [icon]="menuItem.icon"></app-feather-icons>
              </span>
              <span class="nav-text" *ngIf="sideBarOpened">
                {{ menuItem.title }}
                <i class="bi ms-auto" [ngClass]="menuItem.active ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
              </span>
            </button>
            @if (menuItem.children) {
              <ul class="nav flex-column sub-menu" [class.show]="menuItem.active && sideBarOpened">
                @for (childrenItem of menuItem.children; track childrenItem.title; let childIndex = $index) {
                  <li class="nav-item" [class.active]="childrenItem.active">
                    <a
                      class="nav-link"
                      [routerLink]="[childrenItem.path]"
                      routerLinkActive="active"
                      [routerLinkActiveOptions]="{ exact: true }"
                      (click)="toggleSubMenu(childrenItem, menuItem, childIndex)"
                    >
                      <i class="bi bi-dot nav-icon"></i>
                      <span class="nav-text">
                        {{ childrenItem.title }}
                        @if (childrenItem.badgeType) {
                          <span class="badge ms-2" [ngClass]="'badge-' + childrenItem.badgeType">
                            {{ childrenItem.badgeValue }}
                          </span>
                        }
                      </span>
                    </a>
                    @if (childrenItem.children) {
                      <ul class="nav flex-column sub-menu sub-menu--nested">
                        @for (childrenSubItem of childrenItem.children; track childrenSubItem.title) {
                          <li class="nav-item">
                            <a
                              class="nav-link"
                              [routerLink]="[childrenSubItem.path]"
                              routerLinkActive="active"
                              [routerLinkActiveOptions]="{ exact: true }"
                            >
                              <i class="bi bi-caret-right-fill nav-icon"></i>
                              <span class="nav-text">{{ childrenSubItem.title }}</span>
                            </a>
                          </li>
                        }
                      </ul>
                    }
                  </li>
                }
              </ul>
            }
          }
        </li>
      }
    </ul>
  </nav>

  <div class="sidebar-footer" *ngIf="version">
    <span class="sidebar-footer__label" *ngIf="sideBarOpened">Version</span>
    <span class="sidebar-footer__value">{{ version }}</span>
  </div>
</aside>
