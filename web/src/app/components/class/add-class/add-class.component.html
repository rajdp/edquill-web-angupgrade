<!-- Container-fluid starts-->
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm">
                <!-- Enhanced Header -->
                <div class="card-header bg-light py-3">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h5 class="mb-1 text-primary">
                                <i class="fa fa-{{type == 'add' || type == 'addEdit' ? 'plus-circle' : 'edit'}} mr-2"></i>
                                {{type == 'add' || type == 'addEdit' ? 'Create New' : 'Edit'}} Class
                            </h5>
                            <p class="text-muted mb-0 small">
                                <i class="fa fa-info-circle mr-1"></i>
                                Fields marked with <span class="text-danger font-weight-bold">*</span> are required
                            </p>
                        </div>
                        <div class="col-md-6">
                            <div class="float-right">
                                <button type="button" (click)="navigateBackToOrigin()" class="btn btn-outline-secondary btn-sm mr-2">
                                    <i class="fa fa-arrow-left mr-1"></i> Back to List
                                </button>
                                <button type="button" (click)="addclass(type, 1)" class="btn btn-outline-primary mr-2">
                                    <i class="fa fa-save mr-1"></i> Save as Draft
                                </button>
                                <button type="button" (click)="submitDraftClass()" class="btn btn-primary">
                                    <i class="fa fa-check mr-1"></i> Save Class
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <form [formGroup]="classform" class="needs-validation">

                        <!-- Basic Information Section -->
                        <div class="mb-4">
                            <h6 class="text-secondary mb-3 pb-2 border-bottom">
                                <i class="fa fa-info-circle mr-2"></i>Basic Information
                            </h6>

                            <div class="container col-12 col-md-12 d-flex mb-4">
                                <div class="container col-12 col-md-12">
                                    <!-- Class Name & Batch -->
                                    <div class="row mb-3">
                                        <div class="col-12 col-md-{{showBatch == true ? 6 : 12}} form-group">
                                            <label class="font-weight-bold mb-2">
                                                <span class="text-danger mr-1">*</span>Class Name
                                            </label>
                                            <input 
                                                class="form-control" 
                                                [readOnly]="!manageClass" 
                                                formControlName="classname" 
                                                id="validationCustom1"
                                                type="text" 
                                                placeholder="Enter class name (e.g., Math 101, English Literature)"
                                                required>
                                            <em class="error d-block mt-1" *ngIf="!classform.get('classname').valid && (classform.get('classname').dirty || classform.get('classname').touched)">
                                                <i class="fa fa-exclamation-circle mr-1"></i>Class name is required
                                            </em>
                                        </div>
                                        <div class="col-12 col-md-6 form-group" *ngIf="showBatch">
                                            <label class="font-weight-bold mb-2">
                                                <span class="text-danger mr-1">*</span>Batch/Folder
                                            </label>
                                            <app-treeview-contentfolder
                                                [type]="type" 
                                                [calledForm]="'class'" 
                                                [treeviewHeight]="300"
                                                [selectedbatch]="batchId" 
                                                (batchChange)="onBatchSelectionChange($event)"
                                                [class_id]="type != 'add' ? class_id : ''"
                                                [schoolId]="schoolIdNum">
                                            </app-treeview-contentfolder>
                                            <em class="error d-block mt-1" *ngIf="!classform.get('batch').valid && (classform.get('batch').dirty || classform.get('batch').touched)">
                                                <i class="fa fa-exclamation-circle mr-1"></i>Batch is required
                                            </em>
                                        </div>
                                    </div>

                                    <!-- Grade & Subject -->
                                    <div class="row mb-3">
                                        <div class="col-12 col-md-6 form-group">
                                            <label class="font-weight-bold mb-2">
                                                Grade Level
                                            </label>
                                            <ng-select 
                                                (change)="gradeCheck()"
                                                [items]="gradeData"
                                                [ngStyle]="{'pointer-events' : !manageClass ? 'none' : ''}"
                                                bindLabel="grade_name"
                                                bindValue="grade_id"
                                                formControlName="grade"
                                                placeholder="Select one or more grade levels"
                                                typeToSearchText=""
                                                [multiple]="true">
                                            </ng-select>
                                            <small class="form-text text-muted">
                                                <i class="fa fa-graduation-cap mr-1"></i>Select the grade levels for this class
                                            </small>
                                            <em class="error d-block mt-1" *ngIf="!classform.get('grade').valid && (classform.get('grade').dirty || classform.get('grade').touched)">
                                                <i class="fa fa-exclamation-circle mr-1"></i>Grade is required
                                            </em>
                                        </div>
                                        <div class="col-12 col-md-6 form-group">
                                            <label class="font-weight-bold mb-2">
                                                <span class="text-danger mr-1">*</span>Subject(s)
                                            </label>
                                            <ng-select 
                                                [items]="subjectData"
                                                [ngStyle]="{'pointer-events' : !manageClass ? 'none' : ''}"
                                                bindLabel="subject_name"
                                                bindValue="subject_id"
                                                formControlName="subject"
                                                placeholder="Select one or more subjects"
                                                typeToSearchText=""
                                                [multiple]="true">
                                            </ng-select>
                                            <small class="form-text text-muted">
                                                <i class="fa fa-book mr-1"></i>Select subjects covered in this class
                                            </small>
                                            <em class="error d-block mt-1" *ngIf="!classform.get('subject').valid && (classform.get('subject').dirty || classform.get('subject').touched)">
                                                <i class="fa fa-exclamation-circle mr-1"></i>Subject is required
                                            </em>
                                        </div>
                                    </div>

                                    <!-- Tags & Status -->
                                    <div class="row mb-3">
                                        <div class="col-12 col-md-6 form-group">
                                            <label class="font-weight-bold mb-2">
                                                Tags
                                            </label>
                                            <tag-input 
                                                formControlName="tag"
                                                [secondaryPlaceholder]="'Type and press Enter'"
                                                [placeholder]="'Add tags (e.g., advanced, beginner)'"
                                                [editable]='true'
                                                [clearOnBlur]="true"
                                                [addOnPaste]="true"
                                                [addOnBlur]="true"
                                                theme='bootstrap'
                                                [disable]="readOnly">
                                            </tag-input>
                                            <small class="form-text text-muted">
                                                <i class="fa fa-tags mr-1"></i>Add keywords to help organize and search for this class
                                            </small>
                                        </div>
                                        <div class="col-12 col-md-6 form-group">
                                            <label class="font-weight-bold mb-2">
                                                <span class="text-danger mr-1">*</span>Status
                                            </label>
                                            <select class="form-control" formControlName="status" [disabled]="!manageClass">
                                                <option value="1">
                                                    <i class="fa fa-check-circle"></i> Active
                                                </option>
                                                <option value="2">
                                                    <i class="fa fa-pause-circle"></i> Inactive
                                                </option>
                                            </select>
                                            <small class="form-text text-muted">
                                                <i class="fa fa-toggle-on mr-1"></i>Active classes are visible to students
                                            </small>
                                            <em class="error d-block mt-1" *ngIf="!classform.get('status').valid && (classform.get('status').dirty || classform.get('status').touched)">
                                                <i class="fa fa-exclamation-circle mr-1"></i>Status is required
                                            </em>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Class Delivery & Communication Section -->
                        <div class="mb-4">
                            <h6 class="text-secondary mb-3 pb-2 border-bottom">
                                <i class="fa fa-laptop mr-2"></i>Class Delivery & Communication
                            </h6>

                            <div class="container col-12 col-md-12">
                                <div class="row mb-3">
                                    <!-- Delivery Method -->
                                    <div class="form-group col-12 col-md-6">
                                        <label class="font-weight-bold mb-2">
                                            <span class="text-danger mr-1">*</span>Class Delivery Method
                                        </label>
                                        <div class="d-flex gap-4">
                                            <div class="form-check">
                                                <input 
                                                    class="form-check-input" 
                                                    id="online" 
                                                    type="radio" 
                                                    name="onlinePerson" 
                                                    value="1" 
                                                    formControlName="onlinePerson" 
                                                    (change)="onlinePerson()">
                                                <label class="form-check-label" for="online">
                                                    <i class="fa fa-video mr-1"></i> Online
                                                </label>
                                            </div>
                                            <div class="form-check ml-4">
                                                <input 
                                                    class="form-check-input" 
                                                    id="inline" 
                                                    type="radio" 
                                                    value="2" 
                                                    name="onlinePerson" 
                                                    formControlName="onlinePerson" 
                                                    (change)="onlinePerson()">
                                                <label class="form-check-label" for="inline">
                                                    <i class="fa fa-users mr-1"></i> In-Person
                                                </label>
                                            </div>
                                        </div>
                                        <small class="form-text text-muted">
                                            <i class="fa fa-info-circle mr-1"></i>Choose how the class will be delivered
                                        </small>
                                    </div>

                                    <!-- Announcement Type -->
                                    <div class="form-group col-12 col-md-6">
                                        <label class="font-weight-bold mb-2">
                                            <span class="text-danger mr-1">*</span>Announcement Type
                                        </label>
                                        <ng-select 
                                            [items]="announcementListData"
                                            [ngStyle]="{'pointer-events' : !manageClass ? 'none' : ''}"
                                            bindLabel="text"
                                            bindValue="value"
                                            formControlName="announcement_type"
                                            placeholder="Select how announcements are sent"
                                            typeToSearchText=""
                                            [clearable]="false">
                                        </ng-select>
                                        <small class="form-text text-muted">
                                            <i class="fa fa-bell mr-1"></i>Choose notification method for students
                                        </small>
                                        <em class="error d-block mt-1" *ngIf="!classform.get('announcement_type').valid && (classform.get('announcement_type').dirty || classform.get('announcement_type').touched)">
                                            <i class="fa fa-exclamation-circle mr-1"></i>Announcement type is required
                                        </em>
                                    </div>
                                </div>

                                <!-- Zoom Meeting Details (conditional) -->
                                <div *ngIf="showZoomDetails && allowZoomApi">
                                    <div class="alert alert-info mb-3">
                                        <i class="fa fa-video-camera mr-2"></i>
                                        <strong>Zoom Meeting Information</strong> - Enter the meeting details for online classes
                                    </div>

                                    <div class="row mb-3">
                                        <div class="form-group col-12 col-md-6">
                                            <label class="font-weight-bold mb-2">
                                                <span class="text-danger mr-1">*</span>Zoom Meeting Link
                                            </label>
                                            <input 
                                                class="form-control" 
                                                [readOnly]="!manageClass" 
                                                type="url" 
                                                pattern="https?://.+" 
                                                formControlName="meetingLink" 
                                                placeholder="https://zoom.us/j/..." 
                                                (ngModelChange)="changeZoomLink()">
                                            <em class="error d-block mt-1" *ngIf="classform.get('meetingLink').hasError('pattern')">
                                                <i class="fa fa-exclamation-circle mr-1"></i>Please enter a valid URL
                                            </em>
                                            <em class="error d-block mt-1" *ngIf="!classform.get('meetingLink').valid && (classform.get('meetingLink').dirty || classform.get('meetingLink').touched)">
                                                <i class="fa fa-exclamation-circle mr-1"></i>Zoom meeting link is required
                                            </em>
                                        </div>
                                        <div class="form-group col-12 col-md-6">
                                            <label class="font-weight-bold mb-2">
                                                <span class="text-danger mr-1">*</span>Meeting ID
                                            </label>
                                            <input 
                                                (ngModelChange)="changeZoomLink()" 
                                                [readOnly]="!manageClass" 
                                                class="form-control" 
                                                formControlName="meetingId" 
                                                placeholder="123 456 7890" 
                                                type="text">
                                            <em class="error d-block mt-1" *ngIf="!classform.get('meetingId').valid && (classform.get('meetingId').dirty || classform.get('meetingId').touched)">
                                                <i class="fa fa-exclamation-circle mr-1"></i>Meeting ID is required
                                            </em>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="form-group col-12 col-md-6">
                                            <label class="font-weight-bold mb-2">
                                                Meeting Passcode
                                            </label>
                                            <input 
                                                (ngModelChange)="changeZoomLink()" 
                                                [readOnly]="!manageClass" 
                                                class="form-control" 
                                                formControlName="passcode" 
                                                placeholder="Enter passcode (if required)" 
                                                type="text">
                                            <small class="form-text text-muted">
                                                <i class="fa fa-lock mr-1"></i>Optional passcode for meeting security
                                            </small>
                                        </div>
                                        <div class="form-group col-12 col-md-6">
                                            <label class="font-weight-bold mb-2">
                                                Telephone Number
                                            </label>
                                            <input 
                                                class="form-control" 
                                                [readOnly]="!manageClass" 
                                                type="text" 
                                                formControlName="telephone" 
                                                placeholder="Dial-in number (optional)">
                                            <small class="form-text text-muted">
                                                <i class="fa fa-phone mr-1"></i>For students joining by phone
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="row my-2" *ngIf="manageClass || type === 'add' || type === 'edit' || type === 'addEdit'">
                                    <div class="col-md-12 col-xl-4">
                                        <div class="d-flex align-self-center align-items-center ml-3">
                                            <input (change)="updateCourseField()" formControlName="add_course" id="add_course" type="checkbox" class="form-check-input cursor">
                                            <label style="font-size: 15px" for="add_course" class="mt-1 mb-0 cursor font-weight-bold color-primary">Do you want to tag a course to this class?</label>
                                        </div>
                                    </div>
                                    <div class="col-12 mt-3" [ngbCollapse]="!classform.controls.add_course.value">
                                        <div class="row">
                                            <div class="form-group col-4">
                                                <ng-select formControlName="course_id"
                                                           typeToSearchText=""
                                                           placeholder="Select Course *">
                                                    <ng-option *ngFor="let item of courseListData;" [value]="item.course_id">
                                                        <div [title]="item.course_name">{{item.course_name}}
                                                            <span class="badge badge-success" *ngIf="item.status == 'A'">Approved</span>
                                                            <span class="badge badge-warning" *ngIf="item.status == 'P'">Ready for review</span>
                                                            <span class="badge badge-secondary" *ngIf="item.status == 'D'">Draft</span>
                                                            <span class="badge badge-info" *ngIf="item.status == 'R'">Rework</span>
                                                            <span class="badge badge-danger" *ngIf="item.status == 'C'">Cancelled</span></div>
                                                    </ng-option>
                                                </ng-select>
                                                <em class="error" *ngIf="!classform.get('course_id').valid && (classform.get('course_id').dirty || classform.get('course_id').touched)">
                                                    Course Name is required</em>
                                            </div>
                                            <div class="form-group col-4">
                                                <div class="input-group">
                                                    <input class="form-control" name="registration_start_date" placeholder="Registration Start Date (optional)" (keypress)="$event.preventDefault()" (click)="dp2.toggleCalendar()"
                                                           formControlName="registration_start_date" angular-mydatepicker #dp2="angular-mydatepicker"
                                                           (dateChanged)="onDateChanged2($event)" [options]="myDpOptions2"/>
                                                    <div class="input-group-append">
                                                        <button style="padding: 6px 18px" type="button" class="btn btn-primary" (click)="dp2.toggleCalendar()">
                                                            <i class="fa fa-calendar-o"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group col-4">
                                                <div class="input-group">
                                                    <input class="form-control" name="registration_end_date" placeholder="Registration End Date (optional)" (keypress)="$event.preventDefault()" (click)="dp3.toggleCalendar()"
                                                           formControlName="registration_end_date" angular-mydatepicker #dp3="angular-mydatepicker"
                                                           (dateChanged)="onDateChanged3($event)" [options]="myDpOptions3"/>
                                                    <div class="input-group-append">
                                                        <button style="padding: 6px 18px" type="button" class="btn btn-primary" (click)="dp3.toggleCalendar()">
                                                            <i class="fa fa-calendar-o"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-4">
                                                <div class="input-group">
                                                    <input class="form-control" placeholder="Amount (optional)" formControlName="amount" (input)="calculateAmount()" (keypress)="numberValidation($event)">
                                                    <div class="input-group-append">
                                                        <button style="padding: 6px 18px" type="button" class="btn btn-primary">$</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-4">
                                                <div class="input-group">
                                                    <input class="form-control" placeholder="Discount Amount (optional)" formControlName="discount" (input)="calculateAmount()" (keypress)="numberValidation($event)">
                                                    <div class="input-group-append">
                                                        <button style="padding: 6px 18px" type="button" class="btn btn-primary">$</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-4">
                                                <div class="input-group">
                                                    <input class="form-control" placeholder="Actual Amount" formControlName="actual_amount" readonly>
                                                    <div class="input-group-append">
                                                        <button style="padding: 6px 18px" type="button" class="btn btn-primary">$</button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-4">
                                                <input maxlength="4" class="form-control" id="inputSlot" placeholder="Slots Available (optional)" formControlName="slot_available" (keypress)="numberValidation($event)">
                                            </div>

                                            <div class="form-group col-4">
                                                <div class="main-content">
                                                    <select class="form-control" formControlName="payment_type" (change)="checkSelectedValue()">
                                                        <option value="">Use course payment settings (default)</option>
                                                        <option value="F">Fixed</option>
                                                        <option value="R">Recurring</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-4 pr-0 form-group" *ngIf="classform.controls.payment_type.value == 'R'">
                                                <select class="form-control" formControlName="payment_recurring">
                                                    <option value="">Select Recurring Type</option>
                                                    <option value="W">Weekly</option>
                                                    <option value="M">Monthly</option>
                                                    <option value="Q">Quarterly</option>
                                                    <option value="H">Half Yearly</option>
                                                    <option value="A">Annual</option>
                                                </select>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="row align-self-center">
                                    <div class="modal-body col-12 mx-3 col-md-12 p-0">
                                        <app-other-link  id="otherLink" [titleName]="'Additional resource links'"
                                                         [showLink]="manageClass" [arrayValue]="videoArray"></app-other-link>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- form input data designs closed-->

                        <div class="row list-card">
                            <div class="col-12 col-md-12 mb-2">
                                <div class="card">
                                    <div class="card-body p-3">
                                        <div class="row d-flex justify-content-between list-title">
                                            <div class="col-12 col-6 pt-2">
                                                <h4 class="m-0">Schedule</h4>
                                            </div>
                                            <div class="col-12 col-6 d-flex justify-content-end" *ngIf="type == 'add'">
                                                <button type="button"  class="btn btn-outline-primary mr-3" (click)="scheduleClass('daily','1')"> Daily View</button>
                                                <button
                                                        type="button"
                                                        class="btn btn-outline-primary mr-3"
                                                        (click)="scheduleClass('calendar','1')"> Calendar View</button>
                                            </div>
                                            <div class="col-12 col-6 d-flex justify-content-end" *ngIf="type == 'addEdit' || type == 'edit'">
                                                <button type="button"  class="btn btn-outline-primary mr-3" (click)="scheduleClass('daily', '2')"> Daily View</button>
                                                <button
                                                        type="button"
                                                        class="btn btn-outline-primary mr-3"
                                                        (click)="scheduleClass('calendar','2')"> Calendar View</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                    <!--availability time data list design started-->

                        <div class="row slot-sec telemedicineAvailability" *ngIf="scheduleClassType == 'daily'">
                            <div class="col-12 col-md-12 mb-2">
                                <div class="card">
                                    <div class="card-body p-3">
                                       <div class="row">
                                           <div class="col-6 col-md-3">
                                               <div class="row-md-12">
                                                   <label>Start Date</label>
                                               </div>
                                               <div class="row-md-12" *ngIf="readOnlyStart == false">
                                                   <div class="d-flex align-items-baseline">
                                                       <input class="form-control"  formControlName="startDate" placeholder="Start Date"
                                                              name="dp" angular-mydatepicker #dp="angular-mydatepicker" autocomplete="off"
                                                              [options]="myDpOptions" (dateChanged)="onDateChanged($event)" (click)="dp.toggleCalendar()">
                                                       <div class="input-group-append">
                                                           <button style="padding: 6px 18px" type="button" class="btn btn-primary" (click)="dp.toggleCalendar()">
                                                               <i class="fa fa-calendar-o"></i></button>
                                                       </div>
                                                   </div>
                                                   </div>
                                               <div class="row-md-12" *ngIf="readOnly == true || acceptstartdate == true">
                                                   <div class="d-flex align-items-baseline">
                                                       <input #dp="angular-mydatepicker" (dateChanged)="onDateChanged($event)" [options]="editMyDpOptions" [readOnly]="readonlyAllData"
                                                              angular-mydatepicker class="form-control" formControlName="startDate"
                                                              name="dp" placeholder="Start Date">
                                                       <div *ngIf="!readonlyAllData" class="input-group-append">
                                                           <button style="padding: 6px 18px" (click)="dp.toggleCalendar()" class="btn btn-primary" type="button">
                                                               <i class="fa fa-calendar-o"></i></button>
                                                       </div>
                                                   </div>
                                               </div>
                                               <em class="errormessage" *ngIf="classform.get('startDate').invalid && (classform.get('startDate').dirty || classform.get('startDate').touched)">
                                                   StartDate is invalid
                                               </em>
                                           </div>

                                           <div class="col-6 col-md-3">
                                               <div class="row-md-12">
                                                   <label>End Date</label>
                                               </div>
                                               <div class="row-md-12" *ngIf="readOnly == false">
                                                   <div class="d-flex align-items-baseline">
                                                   <input class="form-control" formControlName="endDate" placeholder="End Date"
                                                          name="dp1" angular-mydatepicker #dp1="angular-mydatepicker" autocomplete="off"
                                                          [options]="myDpOptions1" (dateChanged)="onDateChanged1($event)" (click)="dp1.toggleCalendar()">
                                                       <div class="input-group-append">
                                                           <button style="padding: 6px 18px" type="button" class="btn btn-primary" (click)="dp1.toggleCalendar()">
                                                               <i class="fa fa-calendar-o"></i></button>
                                                       </div>
                                                   </div>
                                               </div>
                                               <div class="row-md-12" *ngIf="readOnly == true">
                                                   <input class="form-control" [readOnly]="readonlyAllData" formControlName="endDate" placeholder="End Date"
                                                          name="dp1" angular-mydatepicker #dp1="angular-mydatepicker"
                                                          [options]="myDpOptions1" (dateChanged)="onDateChanged1($event)">
                                               </div>
                                               <em class="errormessage" *ngIf="classform.get('endDate').invalid && (classform.get('endDate').dirty || classform.get('endDate').touched)">
                                                   EndDate is invalid
                                               </em>
                                           </div>
                                       </div>

                                        <div class="row mt-2">
                                            <div class="col-12 col-md-12">
                                                <h5 class="m-0 color-primary">Monday</h5>
                                            </div>
                                            <div class="col-12 col-md-12">
                                                <div class="row d-flex flex-row p-2">
                                                    <div class="ml-1 alignCenter cursor" *ngIf="mondayTimings !=''">

                                                        <span class="badge badge-pill badge-grey-selected ml-2 mt-1" *ngFor="let data of mondayTimings;let i = index" >
                                                        <a (click)="editSlot(data , i)">{{data.teacher_name}} : {{data.slotstarttime}} - {{data.slotendtime }}  &nbsp;</a>
                                                        <a class="rounded-circle">
                                                            <i class="fa fa-close rounded-circle" *ngIf="manageClass"
                                                               (click)="deleteTime('monday',i,data)" aria-hidden="true"></i></a>
                                                            <a (click)="showAttendance(data ,'1')" class="rounded-circle ml-2" title="Mark Attendance">
                                                                <i class="fa fa-street-view"  aria-hidden="true"></i></a>

                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(1)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                    <div class="ml-1 alignCenter" *ngIf="mondayTimings ==''" >
                                                    <span class="badge badge-pill badge-grey ml-2" *ngIf="!manageClass">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                        <span class="badge badge-pill badge-grey ml-2 cursor" *ngIf="manageClass" (click)="showSlot(1)">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(1)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">

                                            <div class="col-12 col-md-12">
                                                <h5 class="m-0 color-primary">Tuesday</h5>
                                            </div>
                                            <div class="col-12 col-md-12">
                                                <div class="row d-flex flex-row p-2">
                                                    <div class="ml-1 alignCenter cursor" *ngIf="tuesdayTimings !=''">
                                                        <span class="badge badge-pill badge-grey-selected ml-2 mt-1" *ngFor="let data of tuesdayTimings;let i = index" >
                                                            <a (click)="editSlot(data , i)">{{data.teacher_name}} : {{data.slotstarttime}} - {{data.slotendtime }}  &nbsp;</a>
                                                            <a  class="rounded-circle"><i class="fa fa-close rounded-circle" *ngIf="manageClass" (click)="deleteTime('tuesday',i,data)" aria-hidden="true"></i></a>
                                                       <a (click)="showAttendance(data ,'2')" class="rounded-circle ml-2" title="Mark Attendance">
                                                                <i class="fa fa-street-view"  aria-hidden="true"></i></a>
                                                        </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(2)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                    <div class="ml-1 alignCenter" *ngIf="tuesdayTimings ==''" >
                                                    <span class="badge badge-pill badge-grey ml-2" *ngIf="!manageClass">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                    <span class="badge badge-pill badge-grey ml-2 cursor" *ngIf="manageClass" (click)="showSlot(2)">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(2)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="col-12 col-md-12">
                                                <h5 class="m-0 color-primary">Wednesday</h5>
                                            </div>
                                            <div class="col-12 col-md-12">
                                                <div class="row d-flex flex-row p-2">
                                                    <div class="ml-1 alignCenter cursor" *ngIf="wednesDayTimingsday !=''">
                                                        <span class="badge badge-pill badge-grey-selected ml-2 mt-1" *ngFor="let data of wednesDayTimingsday;let i = index" >
                                                        <a (click)="editSlot(data , i)">{{data.teacher_name}} : {{data.slotstarttime}} - {{data.slotendtime }}  &nbsp;</a>
                                                        <a  class="rounded-circle"><i class="fa fa-close rounded-circle" *ngIf="manageClass" (click)="deleteTime('wednesday',i,data)" aria-hidden="true"></i></a>
                                                    <a (click)="showAttendance(data ,'3')" class="rounded-circle ml-2"  title="Mark Attendance">
                                                                <i class="fa fa-street-view"  aria-hidden="true"></i></a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(3)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                    <div class="ml-1 alignCenter" *ngIf="wednesDayTimingsday ==''" >
                                                    <span class="badge badge-pill badge-grey ml-2" *ngIf="!manageClass">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                    <span class="badge badge-pill badge-grey ml-2 cursor" *ngIf="manageClass" (click)="showSlot(3)">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass">
                                                            <button type="button"  class="badge-btn" (click)="showSlot(3)"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="col-12 col-md-12">
                                                <h5 class="m-0 color-primary">Thursday</h5>
                                            </div>
                                            <div class="col-12 col-md-12">
                                                <div class="row d-flex flex-row p-2">
                                                    <div class="ml-1 alignCenter cursor" *ngIf="thursdayTimingsday !=''">
                                                        <span  class="badge badge-pill badge-grey-selected ml-2 mt-1" *ngFor="let data of thursdayTimingsday;let i = index" >
                                                        <a (click)="editSlot(data , i)">{{data.teacher_name}} : {{data.slotstarttime}} - {{data.slotendtime }}  &nbsp;</a>
                                                        <a  class="rounded-circle"><i class="fa fa-close rounded-circle" *ngIf="manageClass" (click)="deleteTime('thursday',i,data)"  aria-hidden="true"></i></a>
                                                    <a (click)="showAttendance(data ,'4')" class="rounded-circle ml-2" title="Mark Attendance">
                                                                <i class="fa fa-street-view"  aria-hidden="true"></i></a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(4)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                    <div class="ml-1 alignCenter" *ngIf="thursdayTimingsday ==''" >
                                                    <span class="badge badge-pill badge-grey ml-2" *ngIf="!manageClass">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                    <span class="badge badge-pill badge-grey ml-2 cursor" *ngIf="manageClass" (click)="showSlot(4)">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(4)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="col-12 col-md-12">
                                                <h5 class="m-0 color-primary">Friday</h5>
                                            </div>
                                            <div class="col-12 col-md-12">
                                                <div class="row d-flex flex-row p-2">
                                                    <div class="ml-1 alignCenter cursor" *ngIf="fridayTimingsday !=''">
                                                        <span class="badge badge-pill badge-grey-selected ml-2 mt-1" *ngFor="let data of fridayTimingsday;let i = index" >
                                                        <a (click)="editSlot(data , i)">{{data.teacher_name}} : {{data.slotstarttime}} - {{data.slotendtime }}  &nbsp;</a>
                                                        <a  class="rounded-circle"><i class="fa fa-close rounded-circle" *ngIf="manageClass" (click)="deleteTime('friday',i,data)" aria-hidden="true"></i></a>
                                                    <a (click)="showAttendance(data ,'5')" class="rounded-circle ml-2" title="Mark Attendance">
                                                                <i class="fa fa-street-view"  aria-hidden="true"></i></a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(5)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                    <div class="ml-1 alignCenter" *ngIf="fridayTimingsday ==''" >
                                                    <span class="badge badge-pill badge-grey ml-2" *ngIf="!manageClass">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                    <span class="badge badge-pill badge-grey ml-2 cursor" *ngIf="manageClass" (click)="showSlot(5)">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(5)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="col-12 col-md-12">
                                                <h5 class="m-0 color-primary">Saturday</h5>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="row d-flex flex-row p-2">
                                                    <div class="ml-1 alignCenter cursor" *ngIf="saturdayTimingsday !=''">
                                                        <span  class="badge badge-pill badge-grey-selected ml-2 mt-1" *ngFor="let data of saturdayTimingsday;let i = index">
                                                        <a (click)="editSlot(data , i)">{{data.teacher_name}} : {{data.slotstarttime}} - {{data.slotendtime }}  &nbsp;</a>
                                                        <a  class="rounded-circle"><i class="fa fa-close rounded-circle" *ngIf="manageClass" (click)="deleteTime('saturday',i,data)" aria-hidden="true"></i></a>
                                                   <a (click)="showAttendance(data ,'6')" class="rounded-circle ml-2" title="Mark Attendance">
                                                                <i class="fa fa-street-view"  aria-hidden="true"></i></a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(6)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                    <div class="ml-1 alignCenter" *ngIf="saturdayTimingsday ==''" >
                                                    <span class="badge badge-pill badge-grey ml-2" *ngIf="!manageClass">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                    <span class="badge badge-pill badge-grey ml-2 cursor" *ngIf="manageClass" (click)="showSlot(6)">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(6)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="col-md-12">
                                                <h5 class="m-0 color-primary">Sunday</h5>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="row d-flex flex-row p-2">
                                                    <div class="ml-1 alignCenter cursor" *ngIf="sundayTimingsday !=''">
                                                        <span class="badge badge-pill badge-grey-selected ml-2 mt-1" *ngFor="let data of sundayTimingsday;let i = index" >
                                                        <a (click)="editSlot(data , i)">{{data.teacher_name}} : {{data.slotstarttime}} - {{data.slotendtime }}  &nbsp;</a>
                                                        <a  class="rounded-circle"><i class="fa fa-close rounded-circle" *ngIf="manageClass" (click)="deleteTime('sunday',i,data)" aria-hidden="true"></i></a>
                                                   <a (click)="showAttendance(data ,'7')" class="rounded-circle ml-2" title="Mark Attendance">
                                                                <i class="fa fa-street-view"  aria-hidden="true"></i></a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(7)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                    <div class="ml-1 alignCenter" *ngIf="sundayTimingsday ==''" >
                                                    <span class="badge badge-pill badge-grey ml-2" *ngIf="!manageClass">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                    <span class="badge badge-pill cursor badge-grey ml-2" *ngIf="manageClass" (click)="showSlot(7)">
                                                        <a>&nbsp; Start Time - End Time &nbsp;</a>
                                                    </span>
                                                        <span class="ml-2" *ngIf="manageClass"><button type="button"  class="badge-btn" (click)="showSlot(7)">
                                                            <i class="fa fa-plus" aria-hidden="true"></i></button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- availability time data list design closed-->


                        <!--// calender designs html view -->

                        <div class="row" *ngIf="scheduleClassType == 'calendar'">
                            <div class="col-md-4">
                                <div class="btn-group">
                                    <div [ngClass]="currentCalendarshow === 'preview' ? 'btn btn-primary' : 'btn btn-outline-primary'"
                                         mwlCalendarPreviousView
                                         [view]="view"
                                         [(viewDate)]="viewDate"
                                         (viewDateChange)="closeOpenMonthViewDay('preview')">
                                        Previous
                                    </div>
                                    <div [ngClass]="currentCalendarshow === 'today' ? 'btn btn-primary' : 'btn btn-outline-primary'"
                                         mwlCalendarToday
                                         [(viewDate)]="viewDate"
                                         (viewDateChange)="closeOpenMonthViewDay('today')">
                                        Today
                                    </div>
                                    <div [ngClass]="currentCalendarshow === 'next' ? 'btn btn-primary' : 'btn btn-outline-primary'"
                                         mwlCalendarNextView
                                         [view]="view"
                                         [(viewDate)]="viewDate"
                                         (viewDateChange)="closeOpenMonthViewDay('next')">
                                        Next
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 text-center">
                                <h3 class="letter">{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
                            </div>
                            <div class="col-md-4 text-right">
                                <div class="btn-group">
                                    <div class="btn btn-outline-primary"
                                         (click)="setView(CalendarView.Month)"
                                         [class.active]="view === CalendarView.Month">
                                        Month
                                    </div>
                                    <div class="btn btn-outline-primary"
                                         (click)="setView(CalendarView.Week)"
                                         [class.active]="view === CalendarView.Week">
                                        Week
                                    </div>
                                    <div class="btn btn-outline-primary"
                                         (click)="setView(CalendarView.Day)"
                                         [class.active]="view === CalendarView.Day">
                                        Day
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 mt-2" [ngSwitch]="view">
                                <mwl-calendar-month-view
                                        *ngSwitchCase="CalendarView.Month"
                                        [viewDate]="viewDate"
                                        [events]="events"
                                        [refresh]="refresh"
                                        [activeDayIsOpen]="activeDayIsOpen"
                                        [cellTemplate]="customCellTemplate"
                                        (dayClicked)="dayClicked($event.day)"
                                        (eventClicked)="handleEvent('Clicked', $event.event, type)"
                                        (eventTimesChanged)="eventTimesChanged($event, type)"></mwl-calendar-month-view>
                                <mwl-calendar-week-view
                                        *ngSwitchCase="CalendarView.Week"
                                        [viewDate]="viewDate"
                                        [events]="calenderTimeSlot"
                                        [refresh]="refresh"
                                >
                                </mwl-calendar-week-view>
                                <mwl-calendar-day-view
                                        *ngSwitchCase="CalendarView.Day"
                                        [viewDate]="viewDate"
                                        [events]="calenderTimeSlot"
                                        [refresh]="refresh"></mwl-calendar-day-view>
                            </div>
                        </div>

<!--                        /// calender design closed -->
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #customCellTemplate let-day="day" let-locale="locale">
    <div class="cal-cell-top">
    <span class="cal-day-badge" *ngIf="day.badgeTotal > 0"
    >{{ day.badgeTotal }}</span>
        <span class="cal-day-number">
            {{ day.date | calendarDate:'monthViewDayNumber':locale }}
        </span>
    </div>
    <small style="margin: 5px;" *ngIf="day.events.length >0">
        <span *ngFor="let item of day.events;let i=index">
            <p *ngIf="i== 0 || i === 1 || i ==2 " class="letter">{{item.teacher_name}} : {{item.titleName}} at {{item.slotstarttime + ' ' + item.slotendtime}}{{i != 0 ? ' , ': ''}}</p>
        </span>
        <span *ngIf="day.events.length > 3">
                    {{day.events.length-3 + ' More'}}

        </span>
    </small>
</ng-template>

<ng-template #editTimeDialog let-close="close">
    <div class="modal-header">
        <h4 class="modal-title">Edit Slot</h4>
        <i class="fa fa-close cursor" (click)="close()" ></i>
    </div>
    <form [formGroup]="editslotform" class="telemedicineaAddAvailability">
        <div class="modal-body">
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                    <div class="col-md-1 mt-2">
                        <label>Date </label>
                    </div>
                    <div class="col-md-11">
                        <div class="d-flex align-items-baseline">
                        <input class="form-control" formControlName="selectedDate" placeholder="Select Date *"
                               name="dp" angular-mydatepicker #dp2="angular-mydatepicker" autocomplete="off"
                               [options]="myDpOptions" (dateChanged)="onDateChanged($event)" (click)="dp2.toggleCalendar()">
                        <div class="input-group-append">
                            <button type="button" class="btn btn-primary" (click)="dp2.toggleCalendar()">
                                <i class="fa fa-calendar-o"></i></button>
                        </div>
                    </div>
                    </div>
                    <em class="errormessage" *ngIf="editslotform.get('selectedDate').invalid && (editslotform.get('selectedDate').dirty || editslotform.get('selectedDate').touched)">
                        Date is invalid
                    </em>
                </div>
                </div>
                <div class="col-md-12 mt-3 form-group" *ngIf="adminLogin == true">
                    <label>Teacher Name</label>
                    <ng-select [items]="teacherData"
                               formControlName="teacherid"
                               bindLabel="teacher_name"
                               bindValue="teacher_id"
                               placeholder="Select Teacher"
                               typeToSearchText=""
                               required=""
                               multiple="true"
                    >
                    </ng-select>
                </div>
                <div class="col-md-12 form-group mt-3" *ngIf="adminLogin == false">
                    <label>Teacher Name</label>
                    <input class="form-control"  formControlName="teacherid" readonly type="text" value="{{teacherName}}" placeholder="Select Teacher">
                </div>
                <div class="col-md-6 form-group">

                    <label>Start Time</label>
                    <ngb-timepicker [(ngModel)]="fromTime" [ngModelOptions]="{standalone: true}" (ngModelChange)="checkTime()" [meridian]="meridian" [spinners]="spinner"></ngb-timepicker>
                </div>
                <div class="col-md-6 form-group">

                    <label>End Time</label>
                    <ngb-timepicker [(ngModel)]="toTime" [ngModelOptions]="{standalone: true}" (ngModelChange)="checkTime()" [meridian]="meridian" [spinners]="spinner"></ngb-timepicker>

                </div>
                <div class="w-100 text-center" *ngIf="timeErr">
                    <div class="alert alert-danger">
                        Please select the Valid &nbsp;<strong>From Time & To Time</strong>.
                    </div>
                </div>
                <div class="form-group col-md-12" *ngIf="showZoomDetails && allowZoomApi">
                    <label>Zoom Meeting Link</label>
                    <div class="input-group">
                      <input class="form-control" type="url" pattern="https?://.+" formControlName="meetingLink" placeholder="Zoom Meeting Link *">
                        <div class="input-group-append">
                            <button type="button" class="btn-primary" *ngIf="this.editslotform.controls.meetingLink.value" (click)="cleardata(1, 'calendar')">
                                <i class="fa fa-close" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                    <em class="error" *ngIf="editslotform.get('meetingLink').hasError('pattern')">Please Enter valid Link</em>
                    <em class="error" *ngIf="!editslotform.get('meetingLink').valid && (editslotform.get('meetingLink').dirty || editslotform.get('meetingLink').touched)">Meeting Link is required</em>
                </div>
                <div class="form-group col-md-12" *ngIf="showZoomDetails && allowZoomApi">
                    <label>Zoom Meeting ID</label>
                    <div class="input-group">
                        <input class="form-control" type="text" formControlName="meetingId" placeholder="Meeting ID">
                            <div class="input-group-append">
                                <button type="button" class="btn-primary" *ngIf="this.editslotform.controls.meetingId.value" (click)="cleardata(2, 'calendar')">
                                    <i class="fa fa-close" aria-hidden="true"></i>
                                </button>
                            </div>
                    </div>
                    <em class="error" *ngIf="!editslotform.get('meetingId').valid && (editslotform.get('meetingId').dirty || editslotform.get('meetingId').touched)">Meeting Id is required</em>
                </div>
                <div class="form-group col-md-6" *ngIf="showZoomDetails && allowZoomApi">
                    <label>Zoom Passcode</label>
                    <div class="input-group">
                        <input class="form-control" type="text" formControlName="meetingPasscode" placeholder="Zoom passcode">
                            <div class="input-group-append">
                                <button type="button" class="btn-primary" *ngIf="this.editslotform.controls.meetingPasscode.value" (click)="cleardata(3, 'calendar')">
                                    <i class="fa fa-close" aria-hidden="true"></i>
                                </button>
                            </div>
                    </div>
                    <em class="error" *ngIf="!editslotform.get('meetingPasscode').valid && (editslotform.get('meetingPasscode').dirty || editslotform.get('meetingPasscode').touched)">Meeting Passcode is required</em>
                </div>
                <div class="form-group col-md-6" *ngIf="showZoomDetails && allowZoomApi">
                    <label>Telephone</label>
                    <div class="input-group">
                        <input class="form-control" type="text" formControlName="telephone" placeholder="Enter Telephone Number">
                            <div class="input-group-append">
                                <button type="button" class="btn-primary" *ngIf="this.editslotform.controls.telephone.value" (click)="cleardata(4, 'calendar')">
                                    <i class="fa fa-close" aria-hidden="true"></i>
                                </button>
                            </div>
                    </div>
                    <em class="error" *ngIf="!editslotform.get('telephone').valid && (editslotform.get('telephone').dirty || editslotform.get('telephone').touched)">Telephone Number is required</em>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" (click)="submitTimeSlot(2)">Update</button>
        </div>
    </form>
</ng-template>
<ng-template #modalContent let-close="close">
    <div class="modal-header">
        <h5 class="modal-title">Event action occurred</h5>
        <button type="button" class="close" (click)="close()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div>
            Action:
            <pre></pre>
        </div>
        <div>
            Event:
            <pre></pre>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="close()">
            OK
        </button>
    </div>
</ng-template>


<ng-template #gradeSelection let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title headerText" id="modal-basic-title2"><b>Edit Grade</b></h4>
    </div>
    <div class="modal-body">
        <h5>Are sure want to change the grade since it will change the previously updated student list </h5>
    </div>
    <div class="modal-footer" style="border-top: none">
        <button type="button" class="btn btn-outline-primary" (click)="noClose('grade')">No</button>
        <button type="button" class="btn btn-primary" (click)="eraseSessiondate('grade')">Yes</button>
    </div>
</ng-template>

<ng-template #batchSelection let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title headerText" id="modal-basic-title21"><b>Edit Content Folder</b></h4>
    </div>
    <div class="modal-body">
        <h5>Are sure want to change the Content Folder since it will change the previously updated student list </h5>
    </div>
    <div class="modal-footer" style="border-top: none">
        <button type="button" class="btn btn-outline-primary" (click)="noClose('batch')">No</button>
        <button type="button" class="btn btn-primary" (click)="eraseSessiondate('batch')">Yes</button>
    </div>
</ng-template>


<ng-template #addSlot let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">Schedule</h4>
        <i class="fa fa-close cursor" (click)="onSave1()" ></i>
    </div>
    <form [formGroup]="slotform" class="telemedicineaAddAvailability">
        <div class="modal-body">
            <div class="row">
                 <div class="col-md-12 form-group" *ngIf="adminLogin == true">
                     <label>Teacher Name</label>
                <ng-select [items]="teacherData"
                           (change)="teacherSelection(teacherData)"
                           formControlName="teacherid"
                           bindLabel="teacher_name"
                           bindValue="teacher_id"
                           placeholder="Select Teacher"
                           typeToSearchText=""
                           multiple="true"
                >
                </ng-select>
            </div>
                <div class="col-md-12 form-group" *ngIf="adminLogin == false">
                    <label>Teacher Name</label>
                    <input class="form-control"  formControlName="teacherid" readonly type="text" value="{{teacherName}}" placeholder="Select Teacher">
                </div>
                <div class="col-md-6 form-group">

                        <label>Start Time</label>
                        <ngb-timepicker [(ngModel)]="fromTime" [ngModelOptions]="{standalone: true}" (ngModelChange)="checkTime()"  [meridian]="meridian" [spinners]="spinner"></ngb-timepicker>

                </div>
                <div class="col-md-6 form-group">

                    <label>End Time</label>
                <ngb-timepicker [(ngModel)]="toTime" [ngModelOptions]="{standalone: true}" (ngModelChange)="checkTime()"  [meridian]="meridian" [spinners]="spinner"></ngb-timepicker>

                </div>
                <div class="w-100 text-center" *ngIf="timeErr">
                    <div class="alert alert-danger">
                        Please select the Valid &nbsp;<strong>From Time & To Time</strong>.
                    </div>
                </div>
                 <div class="form-group col-md-12" *ngIf="showZoomDetails && allowZoomApi">
                            <label>Zoom Meeting Link</label>
                        <div class="input-group">
                        <input class="form-control"  type="link" pattern="https?://.+" formControlName="meetingLink" placeholder="Zoom Meeting Link *" (input)="newselection()">
                            <div class="input-group-append">
                                <button type="button" class="btn-primary" *ngIf="this.slotform.controls.meetingLink.value" (click)="cleardata(1, 'slot')">
                                    <i class="fa fa-close" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                        <em class="error" *ngIf="slotform.get('meetingLink').hasError('pattern')">Please Enter valid Link</em>
                     <em class="error" *ngIf="!slotform.get('meetingLink').valid && (slotform.get('meetingLink').dirty || slotform.get('meetingLink').touched)">Meeting Link is required</em>
                 </div>
                    <div class="form-group col-md-12" *ngIf="showZoomDetails && allowZoomApi">
                        <label>Zoom Meeting ID</label>
                        <div class="input-group">
                        <input class="form-control" type="text" formControlName="meetingId" placeholder="Meeting ID" (input)="newselection()">
                            <div class="input-group-append">
                                <button type="button" class="btn-primary" *ngIf="this.slotform.controls.meetingId.value" (click)="cleardata(2, 'slot')">
                                    <i class="fa fa-close" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                        <em class="error" *ngIf="!slotform.get('meetingId').valid && (slotform.get('meetingId').dirty || slotform.get('meetingId').touched)">Meeting Id is required</em>
                    </div>
                    <div class="form-group col-md-6" *ngIf="showZoomDetails && allowZoomApi">
                        <label>Zoom Passcode</label>
                        <div class="input-group">
                        <input class="form-control" type="text" formControlName="meetingPasscode" placeholder="Zoom passcode" (input)="newselection()">
                        <div class="input-group-append">
                            <button type="button" class="btn-primary" *ngIf="this.slotform.controls.meetingPasscode.value" (click)="cleardata(3, 'slot')">
                                <i class="fa fa-close" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                        <em class="error" *ngIf="!slotform.get('meetingPasscode').valid && (slotform.get('meetingPasscode').dirty || slotform.get('meetingPasscode').touched)">Meeting Passcode is required</em>
                    </div>
                <div class="form-group col-md-6" *ngIf="showZoomDetails && allowZoomApi">
                    <label>Telephone Number</label>
                    <div class="input-group">
                        <input class="form-control" type="text" formControlName="telephone" placeholder="Enter Telephone Number" (input)="newselection()">
                        <div class="input-group-append">
                            <button type="button" class="btn-primary" *ngIf="this.slotform.controls.telephone.value" (click)="cleardata(4, 'slot')">
                                <i class="fa fa-close" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                    <em class="error" *ngIf="!slotform.get('telephone').valid && (slotform.get('telephone').dirty || slotform.get('telephone').touched)">Telephone Number is required</em>
                </div>
                <!--</div>-->
                <div class="col-md-12" *ngIf="editTime == false">
                    <h5 class="text-center">Repeat for</h5>
                    <div class="row d-flex justify-content-center">
                        <div *ngFor="let data of days;let i= index;">
                            <button *ngIf="data.show"
                                    type="button" (click)="selectDate(data.id)"
                                    [ngClass]="data.status == 0 ? 'btn btn-outline-primary m-2' : 'btn btn-primary m-2'"
                            >{{data.day}}</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" (click)="submitSlot()">Submit</button>
        </div>
    </form>
</ng-template>

<ng-template #writeNoteOpen let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title text-center">Add Notes</h4>
        <i class="fa fa-close cursor" (click)="onsave()" ></i>
    </div>
        <div class="modal-body">
            <div class="row px-3 d-flex justify-content-center">
                <div class="col-10 mt-2" *ngFor="let list of showNotes; let i = index">
                    <div class="row border border-secondary rounded" *ngIf="list.add_date != '00-00-0000'">
                        <div class="col-9" style="word-wrap: break-word;">
<!--                            {{list.note}}-->
                            <span [innerHTML]="list.note" class="mb-0 mt-3"></span>
                        </div>
                        <div class="col-2 text-right">
                            <p>{{list.add_date}}</p>
                        </div>
                        <div class="col-1" *ngIf="type == 'add'">
                            <i class="fa fa-close fa-1x text-danger" aria-hidden="true" style="cursor:pointer"  (click)="deletedNotes(i, 'add')"></i>
                        </div>
                        <div class="col-1" *ngIf="type == 'edit' || type == 'addEdit'">
                            <i class="fa fa-close fa-1x text-danger" aria-hidden="true" style="cursor:pointer"  (click)="deletedNotes(list, 'edit')"></i>
                        </div>
                    </div>
                </div>
                <div class="col-11 mt-2">
                    <!-- <textarea name="" id="" placeholder="Enter Notes" [(ngModel)]="notes" style="width: 100%; height: 100px; padding: 4px"></textarea> -->
                    <app-tiny-mice  (emitEditorValue)="getEditorValue($event)"
                    [editorPatchValue]="false"
                    [height]="300"
                    [id]="'addNotes'"
                    [(ngModel)]="notes"
                    [showDropBtn]="false"
                    [showInputBtn]="false">
                </app-tiny-mice>
                </div>
                <div class="col-11 text-right mt-2">
                    <button type="button" (click)="onsave()" class="btn btn-outline-primary mr-2">Close</button>
                    <button type="button" (click)="addNotes(type)"  class="btn btn-primary">Add</button>
                </div>
            </div>
        </div>
</ng-template>

<ng-template #classCheck let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="text-center col-12 modal-title"><b>Draft Class</b></h4>
    </div>
    <div class="modal-body">
        <h5 class="color-primary">
            Class will be saved as draft. Add a schedule to activate.
        </h5>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" (click)="close();addclass(this.type, 2)">Yes</button>
        <button class="btn btn-outline-primary" (click)="close()">No</button>
    </div>
</ng-template>

<ng-template #zoomLink let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="text-center col-12 modal-title"><b>Zoom Meeting Link</b></h4>
    </div>
    <div class="modal-body">
        <h5 class="color-primary">
            Do you want to update the Zoom details for the schedule as well?
        </h5>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" (click)="close();updateZoomLink()">Yes</button>
        <button class="btn btn-outline-primary" (click)="close()">No</button>
    </div>
</ng-template>

<ng-template #studentAtendance let-c="close" let-d="dismiss">
    <div class="modal-header col-12 d-flex align-self-center">
        <h4 class="text-center col-11 modal-title ml-5"><b>Student Attendance</b></h4>
        <i (click)="modalRef1.close()" class="fa fa-close cursor d-flex align-self-center" style="font-size: 1.2rem"></i>
    </div>
    <div *ngIf="scheduleDates.length == 0" class="col-12 d-flex justify-content-center list-card my-5">
        <div class="col-8">
            <button class="nodataList">No Attendance Found in past and present days</button>
        </div>
    </div>
    <div *ngIf="scheduleDates.length > 0" class="modal-body">
        <div class="col-md-12 d-flex px-0 mb-3">
            <div class="col-md-4 px-0">
                <select (ngModelChange)="dropdownChange($event)" [(ngModel)]="studentAttendanceDate" class="form-control">
                    <option *ngFor="let item of scheduleDates;let i = index" [value]="item">{{item}}</option>
                </select>
            </div>
            <div *ngIf="studentAttendanceDate == dateAddValue" class="col-md-6 px-0 d-flex justify-content-end">
                <input (click)="allPresent($event)" class="align-self-center cursor" id="allPresent" type="checkbox">&nbsp;<label for="allPresent" class="align-self-center cursor mb-0">All Present</label>
            </div>
        </div>
        <ngx-datatable
            #table
            class="bootstrap"
            [rows]="studentRows"
            [columnMode]="'force'"
            [loadingIndicator]="false"
            [headerHeight]="40"
            [footerHeight]="40"
            [limit]="10"
            [rowHeight]="'auto'"
            [selected]="selected"
            [selectionType]="'checkbox'"
            (select)="onSelect($event)"
        >
            <ngx-datatable-column class="contenttext" name="Name">
                <ng-template ngx-datatable-cell-template let-row="row">
                    <span> {{row.first_name}} {{row.last_name}}</span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column class="contenttext" name="Email" *ngIf="manageClass">
                <ng-template ngx-datatable-cell-template let-row="row">
                    <span>{{row.student_id}}</span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column class="contenttext" name="Grade">
                <ng-template ngx-datatable-cell-template let-row="row">
                    <span>{{row.grade_name}}</span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column *ngIf="studentAttendanceDate == dateAddValue" class="contenttext " name="Attendance">
                <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                    <div class="d-flex align-items-center">
                        <label class="mr-2 d-flex align-items-center">
                            <input (change)="attendance($event, row.isSelected, 'true' ,rowIndex)" [disabled]="row.attendance == '0'"
                                   [checked]="row.attendance == '1'" name="{{rowIndex+'rad'}}" type="checkbox">&nbsp; Present
                        </label>
                        <label class="d-flex align-items-center">
                            <input (change)="attendance($event, row.isSelected, 'false' ,rowIndex)" [disabled]="row.attendance == '1' || row.makeup_class_id != ''"
                                   [checked]="row.attendance == '0'" name="{{rowIndex+'rad'}}" type="checkbox">&nbsp; Absent
                        </label>
                        <button (click)="addMakeUpClass(row)" *ngIf="row.makeup_class_id == '' && row?.attendance == '0' &&
                            (auth.getRoleId() == '2' || (auth.getRoleId() == '4' && auth.getSessionData('teacher_type') != '0'))" class="btn-sm-view cancel ml-2 px-2 py-1">
                            <i style="font-size: 16px" class="fa fa-calendar-plus-o mr-1" title="Schedule Make-up Class" aria-hidden="true"></i>Schedule Make-up Class
                        </button>
                        <span *ngIf="row.makeup_class_id != '' && row?.attendance == '0'" class="makUpClass_text ml-2 my-1">Make-up Class:
                        <span style="font-size: 14px" class="ml-1 color-primary font-weight-bold">{{row.makeup_class_name}} - {{row.makeup_class_date | customDateFormat}}</span>
                    </span>
                    </div>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column *ngIf="studentAttendanceDate != dateAddValue" class="contenttext " name="Attendance">
                <ng-template class="text-center" let-row="row" ngx-datatable-cell-template>
                    <i style="font-size: 18px" *ngIf="row?.attendance == '1'" class="fa fa-check-circle color-green"></i>
                    <i style="font-size: 18px" *ngIf="row?.attendance == '0'" class="fa fa-times-circle color-red"></i>
                    <span *ngIf="row.attendance == ''">-</span>
                    <button (click)="addMakeUpClass(row)" *ngIf="row.makeup_class_id == '' && row?.attendance == '0' &&
                        (auth.getRoleId() == '2' || (auth.getRoleId() == '4' && auth.getSessionData('teacher_type') != '0'))" class="btn-sm-view cancel ml-2 px-2 py-1">
                        <i style="font-size: 16px" class="fa fa-calendar-plus-o mr-1" title="Schedule Make-up Class" aria-hidden="true"></i>Schedule make-up Class
                    </button>
                    <span *ngIf="row.makeup_class_id != '' && row?.attendance == '0'" class="makUpClass_text ml-2 my-1">Make-up Class:
                        <span style="font-size: 14px" class="ml-1 color-primary font-weight-bold">{{row.makeup_class_name}} - {{row.makeup_class_date | customDateFormat}}</span>
                    </span>
                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </div>
    <div *ngIf="scheduleDates.length > 0" class="modal-footer">
        <button (click)="modalRef1.close()" class="btn btn-outline-primary">Cancel</button>
        <button (click)="updateStudentAttendance(editData[0]?.students, 'all')" [disabled]="studentAttendanceDate != dateAddValue" class="btn btn-primary">Submit</button>
    </div>
</ng-template>
