<!-- Container-fluid starts-->

<ng-template #content let-c="close" let-d="dismiss" xmlns:text-transform="http://www.w3.org/1999/xhtml">
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Delete School</h4>
    </div>
    <div class="modal-body">
        <!-- Container-fluid starts-->
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12">
                    <h5 class="text-center mt-3">Are you sure you want to delete School details '{{deleteUser.brand_name}}'?</h5>
                </div>
            </div>
        </div>

        <!-- Container-fluid Ends-->

    </div>
    <div class="modal-footer">
<!--        <button type="button" class="btn btn-primary" (click)="deleteConfirm()" >Delete</button>-->
        <button type="button" class="btn btn-outline-primary" (click)="onSave()">Cancel</button>
    </div>
</ng-template>
<div class="container-fluid">
    <div class="card" style="background-color: #f4f4f4">
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="btn-popup pull-left">
                        <div class="input-group">
                            <input type="text" class="form-control" style="height:35px" size="25" placeholder="Search Institution" (input)="updateFilter($event)">
<!--                            <input type="text" class="form-control" style="height:45px" size="50" placeholder="Search Institution" (input)="updateFilter($event)">-->
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="btn-popup pull-right">
                        <a class="btn btn-primary" [routerLink]="'/School/create-School/add'">Register Institution</a>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row" *ngIf="listData != ''">
                    <div class="col-md-6" style="padding-right: 4px; padding-left: 4px" *ngFor="let item of listData">
                        <div class="card" style="background-color: white; margin: 0 2px 8px 2px">
                            <app-feather-icons [icon]="'edit'" style="cursor: pointer; position: absolute; z-index: 5; right: 15px; top: 10px" (click)="editschool(item)"></app-feather-icons>
                            <table class="col-md-12">
                                <tr>
                                    <td style="width: 200px">
                                        <div class="card col-md-4 px-0 imghvr-reveal-up school-img school-card-img1" (click)="viewDetails(item)">
                                            <img *ngIf="item.profile_url == ''" class="card-img img-thumbnail"
                                                 src="assets/images/ristaschool/school-default.png" alt="">
                                            <img *ngIf="item.profile_url != ''" class="card-img img-thumbnail"
                                                 [src]="sanitizer.bypassSecurityTrustResourceUrl(webhost + '/' + item.profile_url)" alt="">
                                        </div>
                                    </td>
                                    <td><div class="card-body p-3 pl-5">
                                        <div class="row d-flex flex-column">
                                            <h4 class="card-title mt-3 capital" style="color: purple">{{item.name}}</h4>
                                        </div>
                                        <div class="row d-flex flex-column">
                                            <table>
                                                <tr *ngIf="item.name != ''" >
                                                    <td class="capital" style="color: rgba(0,0,0,0.5)">Institution: </td>
                                                    <td>{{item.name}}</td>
                                                </tr>
                                                <tr *ngIf="item.admin_details.length == '1'">
                                                    <td style="width: 70px;  color: rgba(0,0,0,0.5)">E-mail: </td>
                                                    <td style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 0">{{item.admin_details[0].email_id}}</td>
                                                </tr>
                                                <tr *ngIf="item.admin_details.length != '1'">
                                                    <td style="width: 70px;  color: rgba(0,0,0,0.5)">E-mail: </td>
                                                    <td (click)="viewDetails(item)" class="table-size-words cursor">{{item.admin_details[0].email_id}}, <br class="break-size-show">{{item.admin_details.length - 1}} Admin...</td>
                                                </tr>
                                                <tr>
                                                    <td style="color: rgba(0,0,0,0.5)">Contact: </td>
                                                    <td>{{item.admin_details[0].mobile}}</td>
                                                </tr>
                                                <tr *ngIf="item.school_website != ''">
                                                    <td style="color: rgba(0,0,0,0.5)">Website: </td>
                                                    <td style="cursor: pointer">
                                                        <a href="{{item.school_website}}" target="_blank">{{item.school_website}}</a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="color: rgba(0,0,0,0.5)">Status:</td>
                                                    <td class="badge badge-success" *ngIf="item.status == 'Active'">Active</td>
                                                    <span class="badge badge-danger" *ngIf="item.status == 'Suspended'">Suspended</span>
                                                    <span class="badge badge-warning" *ngIf="item.status == 'Disengaged'">Disengaged</span>
                                                    <span class="badge badge-danger" *ngIf="item.status == 'Deleted'">Deleted</span>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row d-flex justify-content-center" *ngIf="listData == ''">
                <div class="col-4">
                    <button  class="nodataList" >No Data Available!</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Container-fluid Ends-->
</div>
<ng-template #viewdetails let-c="close" let-d="dismiss">
    <div class="modal-header" >
        <h4 class="modal-title" ><b>{{viewDetail.school_name}}</b></h4>
        <i class="fa fa-close fa-lg mt-1" aria-hidden="true" style="color:#7F3486; cursor: pointer; float: right;" (click)="onSave()"></i>
    </div>
    <div class="modal-body">
        <!-- Container-fluid starts-->
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card-body pt-2">
                        <div class="row d-flex flex-column">
                            <div class="mb-5 fit-image">
                                <img *ngIf="viewDetail.profile_url == ''"
                                     src="assets/images/ristaschool/school-default.png" alt="" style="border-radius: 0">
                                <img *ngIf="viewDetail.profile_url != ''"
                                     [src]="sanitizer.bypassSecurityTrustResourceUrl(webhost + '/' + viewDetail.profile_url)"  style="border-radius: 0" alt="">
                            </div>
                            <table>
                                <tr *ngIf="viewDetail.corporate_name != ''">
                                    <td  class="pl-4"><b>Corporate: </b></td>
                                    <td>{{viewDetail.corporate_name}},</td>
                                </tr>
                                <tr>
                                    <td class="pl-4" style="vertical-align: top; width: 150px"><b>Address: </b></td>
                                    <td>{{viewDetail.address_1}},<br>
                                        {{viewDetail.city}},<br>
                                        {{viewDetail.state_name}},<br>
                                        {{viewDetail.country_name}}</td>
                                </tr>
                                <tr>
                                    <td class="pl-4"><b>Status:</b></td>
                                    <td class="badge badge-success" *ngIf="viewDetail.status == 'Active'">Active</td>
                                    <span class="badge badge-danger" *ngIf="viewDetail.status == 'Suspended'">Suspended</span>
                                    <span class="badge badge-warning" *ngIf="viewDetail.status == 'Disengaged'">Disengaged</span>
                                    <span class="badge badge-danger" *ngIf="viewDetail.status == 'Deleted'">Deleted</span>
                                </tr>
                            </table>
                            <div class="mt-3">
                                <h5 class="text-capitalize" style="text-align: center"><b>Admin Details</b></h5>
                            </div>

                            <div class="card" *ngFor="let view of viewDetail.admin_details">
                                <table>
                                    <tr>
                                        <td class="pl-4"style="width: 150px"><b>Name:</b></td>
                                        <td class="text-capitalize">{{view.first_name}} {{view.last_name}}</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-4"><b>E-mail:</b></td>
                                        <td>{{view.email_id}}</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-4"><b>Contact:</b></td>
                                        <td>{{view.mobile}}</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Container-fluid Ends-->

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" (click)="onSave()">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="editschool(viewDetail); onSave()">Edit</button>
    </div>
</ng-template>
